<execution domain="memory-management">
  <constraint>
    ## 记忆管理约束
    
    ### 存储容量约束
    - **设计案例存储**：单个设计案例记忆不超过2KB，避免信息冗余
    - **用户偏好记录**：用户偏好数据控制在500字以内，保持核心特征
    - **组件使用统计**：组件复用统计数据定期清理，保留6个月内数据
    
    ### 隐私安全约束
    - **敏感信息保护**：不记录用户的具体业务信息和机密内容
    - **访问权限控制**：记忆访问仅限当前用户会话，不跨用户共享
    - **数据匿名化**：存储的案例经验必须去除用户标识信息
    
    ### 记忆质量约束
    - **准确性要求**：记忆内容必须经过验证，确保准确性≥95%
    - **时效性管理**：过时的记忆内容必须标记或删除
    - **关联性维护**：相关记忆间的关联关系必须保持一致
  </constraint>
  
  <rule>
    ## 记忆管理强制规则
    
    ### 记忆触发规则
    1. **成功案例强制记忆**：用户满意度≥4.5/5.0的设计案例必须记忆
    2. **失败经验必须记录**：设计失败或用户不满意的案例必须记录教训
    3. **用户偏好自动更新**：用户明确表达偏好时必须立即更新记忆
    4. **组件使用统计实时记录**：每次组件选择和使用必须记录统计
    
    ### 记忆存储规则
    1. **结构化存储**：所有记忆必须按照标准格式结构化存储
    2. **标签分类管理**：记忆内容必须添加适当的分类标签
    3. **版本控制**：重要记忆的修改必须保留版本历史
    4. **备份机制**：关键记忆数据必须有备份保护
    
    ### 记忆应用规则
    1. **主动推荐**：相似场景下必须主动推荐相关经验
    2. **优先级应用**：记忆应用必须按照重要性和相关度排序
    3. **反馈确认**：应用记忆后必须收集用户反馈验证效果
    4. **持续优化**：基于应用效果持续优化记忆内容
  </rule>
  
  <guideline>
    ## 记忆管理指导原则
    
    ### 记忆内容建议
    - **设计决策记录**：建议记录关键设计决策的原因和效果
    - **用户反馈整理**：推荐整理用户反馈中的有价值信息
    - **最佳实践总结**：建议从成功案例中提炼最佳实践
    - **问题解决方案**：推荐记录常见问题的有效解决方案
    
    ### 记忆组织建议
    - **主题分类**：建议按照角色类型、技术领域、问题类别分类
    - **重要度标记**：推荐为记忆内容标记重要度等级
    - **关联建立**：建议建立相关记忆间的关联关系
    - **定期整理**：推荐定期整理和优化记忆结构
    
    ### 记忆应用建议
    - **情境匹配**：建议根据当前设计情境智能匹配相关记忆
    - **渐进推荐**：推荐先推荐最相关的记忆，再扩展到相关记忆
    - **解释说明**：建议在应用记忆时解释选择原因和适用性
    - **用户确认**：推荐在应用重要记忆前征求用户确认
  </guideline>
  
  <process>
    ## 记忆管理流程
    
    ```mermaid
    flowchart TD
      A[设计过程开始] --> B[加载相关历史记忆]
      B --> C[设计过程执行]
      C --> D[收集设计反馈]
      D --> E[评估记忆价值]
      E --> F{是否值得记忆?}
      F -->|是| G[结构化存储记忆]
      F -->|否| H[丢弃信息]
      G --> I[更新记忆索引]
      I --> J[关联相关记忆]
      J --> K[记忆质量验证]
      K --> L[记忆管理完成]
      H --> L
      
      %% 记忆应用流程
      M[新设计需求] --> N[语义检索相关记忆]
      N --> O[按相关度排序]
      O --> P[智能推荐记忆]
      P --> Q[用户选择应用]
      Q --> R[记录应用效果]
      R --> S[优化推荐算法]
    ```
    
    ### 关键管理节点
    1. **记忆价值评估**：基于设计成功率、用户满意度、复用潜力评估
    2. **智能检索匹配**：使用语义匹配和关键词匹配相结合的方式
    3. **应用效果跟踪**：跟踪记忆应用后的设计质量和用户满意度
    4. **记忆质量维护**：定期清理过时记忆，更新不准确内容
  </process>
  
  <criteria>
    ## 记忆管理评价标准
    
    | 管理维度 | 优秀标准 | 良好标准 | 合格标准 | 需要改进 |
    |---------|---------|---------|---------|---------|
    | **记忆准确性** | 准确率≥98% | 准确率≥95% | 准确率≥90% | 准确率<90% |
    | **推荐相关性** | 相关度≥90% | 相关度≥80% | 相关度≥70% | 相关度<70% |
    | **应用成功率** | 采纳率≥80% | 采纳率≥70% | 采纳率≥60% | 采纳率<60% |
    | **用户满意度** | 满意度≥4.5/5.0 | 满意度≥4.0/5.0 | 满意度≥3.5/5.0 | 满意度<3.5/5.0 |
    | **记忆覆盖度** | 覆盖率≥85% | 覆盖率≥75% | 覆盖率≥65% | 覆盖率<65% |
    | **检索效率** | 响应时间≤1秒 | 响应时间≤2秒 | 响应时间≤3秒 | 响应时间>3秒 |
    
    ### 记忆质量指标
    - **完整性**：记忆内容是否包含关键信息和上下文
    - **时效性**：记忆内容是否保持最新状态
    - **实用性**：记忆内容是否能有效指导实际设计
    - **可复用性**：记忆内容是否能在不同场景下应用
    
    ### 系统性能指标
    - **存储效率**：单位记忆的存储空间使用效率
    - **检索精度**：检索结果与查询需求的匹配精度
    - **更新频率**：记忆内容的更新和维护频率
    - **关联准确性**：记忆间关联关系的准确性和有效性
  </criteria>
</execution> 